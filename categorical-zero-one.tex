\documentclass{article}
\usepackage{eigilscmds}
\usepackage{tikzit}
\input{/home/eigil/Downloads/tikzit/styles/foo.tikzstyles}
\usepackage{todonotes}
\author{Eigil Fjeldgren Rischel}
\title{A Kolmogorov zero to one law for Markov Categories}
\date{}
\renewcommand{\sf}{\mathsf}
\DeclareMathOperator{\del}{del}
\begin{document}
\maketitle
\section{Introduction}
This is a treatment of Kolmogorov's zero to one law in the setting of Markov categories.
Throughout, $J$ is a possibly infinite set and $F \subset J$ is a finite subset.

\section{Definitions and preliminaries}
Suppose $\cC$ is a Markov category.
To make sense of infinite families of random variables,
we will want to have a notion of infinite tensor product.
Of course, there is no reason such a thing should exist - for instance, it would be very strange for $\sf{FinStoch}$ to have infinite tensor products.
But in cases where the subcategory $\cC_{det}$ of deterministic maps has infinite products as well as finite ones, it seems natural to ask whether this is compatible with the structure of $\cC$ in a suitable sense.
We introduce the following notion
\begin{definition}
    Let $\{X_i\}_{i \in J}$ be a collection of objects in $\cC$.
    Then we may form the diagram \[F \mapsto \bigotimes_{i \in F} X_i\]
    indexed over the poset of finite subsets $F \subset J$, ordered by reverse inclusion, where the structure maps are induced by $\del_{X_i}: X_i \to I$ and the coherence isomorphisms.

    We define $\bigotimes_{i \in J}X_i$ to be the limit of this (cofiltered) diagram in $\cC$, if it exists.
\end{definition}
\begin{remark}
    If $J$ is finite, this coincides with the normal tensor product indexed over $J$.
\end{remark}
\begin{remark}
    It is easily verified that 
    \[\bigotimes_{i \in J} X_i \tensor \bigotimes_{i' \in J'} X_{i'} \cong \bigotimes_{i \in J \sqcup J'} X_i\]
    i.e tensor products of infinite tensor products can be written as single infinite tensor products in the obvious way.

    Probably the similar theorem about infinite tensor products of infinite tensor products is true as well, although I have not verified it. 
\end{remark}
\begin{remark}
    Supposing $\bigotimes_{i\in J}X_i$ exists, the structure morphisms $\pi_j: \bigotimes_{i \in J} X_i \to X_j$ are deterministic and exhibit it as the product in $\cC_{det}$ of $\{X_i\}$.
\end{remark}
\begin{remark}
    If we take as input certain maps $I \to X_i$ as well, so that we have an infinite system of probability distributions, we can also try to define the infinite tensor product as a colimit, which will then be a space with a probability distribution, corresponding to an infinite system of random variables.
    It would also be possible to formulate the zero-to-one law in this setting, but I have not explored this.
\end{remark}

To actually use this idea to reproduce the usual Kolmogorov zero-one law, we need to do a bit of work:
\begin{example}
Let $\{(X_i,\Sigma_i)\}_{i\in J}$ be a set of measurable spaces in $\sf{Stoch}$.
Then consider their product $X = \prod_i X_i$ with the $\sigma$-algebra generated by the projections $\pi_i: X \to X_i$, which we denote $\Sigma$.
Let us write in general $X_F = \prod_{i\in F}X_F$, $\Sigma_F$ for the corresponding $\sigma$-algebra, and $\pi_F: X \to X_F$ for the projection.

Let $\{p_F: A \times \Sigma_F \to [0,1]\}_{F \subset J}$ be a collection of Markov kernels $A \to \prod_{i \in F}X_i$ for each $F$, compatible in the suitable sense.
Consider a point $a \in A$ and a generator $\pi_F\inv(B)$ for $\Sigma$, where $B \in \Sigma_F$.
Then we define $p(a,\pi_F\inv(B)) = p_F(a,B)$.
Note that the collection of such $\pi_F\inv(B)$ is a ring of sets on $X$ which generates $\Sigma$ - hence by Caratheodory extension, there is a unique probability measure
$p(a,-)$ on $X$ extending it. This is how we define $p(a,A)$ for general subsets $A \subset X$.

Now consider the class of subsets $A \in \Sigma$ such that $p(-,A):A \to X$ is measurable.
This class is a $\sigma$-algebra, which contains $\pi_F\inv(B)$, since $p(-,\pi_F\inv(B)) = p_F(-,B)$, which is measurable by assumption.
Since these generate $\Sigma$, the map is always measurable.
Hence $p$ is a Markov kernel.

This argument also shows that this Markov kernel is determined uniquely by the fact that $p(a,\pi_F\inv(B)) = p_F(a,B) = \pi_F \circ p$.
This proves that $(X,\Sigma)$ is the limit of $(X_F,\Sigma_F)$, so that it is the tensor product $\bigotimes_{i\in J} X_i$.
\end{example}

We will refer to the structure maps $\bigotimes_{i\in J} X_i \to \bigotimes_{i\in F} X_i$ as \emph{finite marginalizations}.

This notion of infinite tensor product describes a notion of infinite collection of random variable where all dependence must be witnessed on some finite subset of the variables.

We can codify this in the following definition
\begin{definition}
    Let $p: A \to \bigotimes_{i\in J}X_i$ be a map in $\cC$.
    We say it exhibits the independence of $\{X_i\}$ given $A$ if each finite marginalization $A \to \bigotimes_{i \in F}X_i$ exhibits the independence of $\{X_i\}_{i \in F}$ given $A$.
\end{definition}

\section{Theorem}
\begin{theorem}
    Suppose we are given $p: A \to T \tensor \bigotimes_{i \in J} X_i$ satisfying the following conditions:
    \begin{enumerate}
        \item $T$ is a deterministic function of $\bigotimes_{i \in J} X_i$.
        \item For each finite subset $F \subset J$, the marginal $A \to T \tensor \bigotimes_{i \in F}X_i$ displays the independence of $T$ and $\bigotimes_{i \in F} X_i$.
    \end{enumerate}
    Then the marginal $A \to T$ is deterministic as well.
\end{theorem}

This theorem is a consequence of two lemmas.
\begin{lemma}[The infinite independence lemma]
    Suppose $p: A \to \bigotimes X_i$ exhibits the independence of $\{X_i\}$.
    Then for each $j$, the map $A \to X_j \tensor \bigotimes_{i \neq j}X_i$ exhibits the independence $X_j \bot \tensor_{i\neq j} X_i \mid \mid A$.
\end{lemma}
\begin{proof}[Sketch of proof]
    To prove this, we must compare two maps $A \to X_j \tensor \bigotimes_{i\neq j} X_i \cong \bigotimes_i X_i$.
    To show that these maps are equal, it suffices to show that all finite marginalizations of them are equal.
    But this is an immediate consequence of the assumption.
\end{proof}


\begin{lemma}[The determinism lemma]
    Suppose $p: A \to T \tensor X$ is such that $T$ is a deterministic function of $X$, and $p$ exhibits the independence $T \bot X \mid \mid A$.
    Then the marginal $A \to T$ is deterministic.
\end{lemma}
\begin{proof}
The proof is a string diagram chase:
First, the assumption that $T$ is a deterministic function of $X$ means precisely that we can find $f$ deterministic so that.

\tikzfig{determinismlemma1}.

Now we can use the independence of $X$ and $T$, and the axioms, to rewrite this as

\tikzfig{determinismlemma2}

Applying the map $1_T \tensor f$ to the second and fourth diagram now gives an equality

\tikzfig{determinismlemma3}

Where we have also applied the determinism of $f$.
This is precisely the statement that $A \to T \tensor X \to X \labelto{f} T$ is deterministic.

Lastly, we use the equality 

\tikzfig{determinismlemma4}

To see that the marginal $A \to T \tensor X \to T$ is deterministic as desired.

\end{proof}


\begin{proof}[Proof of the theorem]
    It's clear from the definition that $A \to T \tensor \bigotimes X_i$ exhibits the independence of $\{T, X_1, \dots\}$.
    By the infinite independence lemma, this means that it also exhibits the independence $T \bot \bigotimes X_i \mid \mid A$.
    Now the determinism lemma implies exactly what we want, that the marginal $A \to T$ is deterministic.
\end{proof}

\begin{corollary}[Kolmogorov zero to one law]
    Suppose $\Omega$ is a measure space with a probability measure $P$, $\{f_i: \Omega \to X_i\}$ is a collection of independent random variables,
    and $T \subset \Omega$ is a subset in the $\sigma$-algebra generated by the $f_i$, such that $1_T$ is independent of any finite subset of the $f_i$.
    Then $P(T)$ is $0$ or $1$.
\end{corollary}
\begin{proof}
    Consider the composite $I \labelto{P} \Omega \labelto{1_T, \{f_i\}} \{0,1\} \tensor \bigotimes_i X_i$.
    Then independence of the $f_i$ means precisely that this map exhibits the independence of $\{X_i\}$ given $I$ in the above sense.
    Moreover, $T(\omega)$ is determined by the values of $f_i(\omega)$, so $T$ factors as a map $\prod_i X_i \to \{0,1\}$, and
    this map is measurable.
    Hence we can apply the theorem, and conclude that the map $I \labelto{P} \Omega \labelto{T} \{0,1\}$ is deterministic - but this means it's just a constant map,
    which precisely means that $T$ is true or false with probability $1$.
\end{proof}

\section{Speculation}
It would good to have a way of using this theorem without assuming that the category in question has these infinite tensor products.
We can always make sense of the notion of an infinite independent collection of random variables (just a collection of maps $I \to X_i$).
Of course to talk about an outcome or a function which depends on the outcome of all the $X_i$, we need a map $\prod_i X_i \to T$ of some type.
But since this map is deterministic, we may want to talk about it without admitting it to our category of Markov kernels.

As an example, the probability theory of finite or countable sets is much simpler than the probability theory of infinite sets, since the whole edifice of $\sigma$-algebras can be done away with.
This is a reason to prefer $\sf{FinStoch}$ over the full $\sf{Stoch}$.
In this case, it would be desirable to be able to apply this theorem, given a collection of finite variables $I \to X_i$ and a function $\prod_i X_i \to Y$
(which may be required to satisfy some condition like continuity in the product topology), without begin required to invent the larger category $\sf{Stoch}$.

For instance, maybe there is a Markov category with objects the profinite sets, which can be obtained from $\sf{FinStoch}$ by some formal construction (maybe even simply as the pro-category), which admits infinite tensor products, and where one can profitably interpret this theorem.
\end{document}